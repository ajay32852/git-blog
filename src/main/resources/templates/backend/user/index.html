<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      lang="en"
      layout:decorate="~{layout/adminmain}">
<body>
    <div layout:fragment="content">
    <!-- start content -->
<!--app-content open-->
       <div class="app-content">
           <div class="side-app">
            <!-- PAGE-HEADER -->
            <div class="page-header">
                    <div>
                      <h1 class="page-title" th:text="${title}"></h1>
                    </div>
                    <div class="ms-auto pageheader-btn">
                            <a href="" class="btn btn-primary btn-icon text-white me-2">
                                    <span>
                                     <i class="fe fe-plus"></i>
                                    </span> Add User
                            </a>
                    </div>
            </div>
            <!-- PAGE-HEADER END -->
            <!-- Row -->
            <div class="row row-sm">
            <div class="col-lg-12">
            <div class="card">
             <div class="filter-outer box box-info">
                <div class="box-header">
                    <h3 class="box-title"><span
                            class="caption-subject font-green bold uppercase">Search</span></h3>

                </div>
              
            </div>


            <div class="card-header">
                    <h3 class="card-title" th:text="${show_title}" ></h3>
            </div>

            <div th:if="${successMessage}" class="alert alert-success">
                <p th:text="${successMessage}"></p>
            </div>
            <div th:if="${errorMessage}" class="alert alert-danger">
                <p th:text="${errorMessage}"></p>
            </div>

            <div class="card-body">
                    <div class="table-responsive">
                         <div th:if="${!users.empty}">  
                            <table class="table table-bordered text-nowrap border-bottom" id="basic-datatable">
                                    <thead>
                                            <tr>
                                                    <th class="wd-15p border-bottom-0">#</th>
                                                    <th class="wd-15p border-bottom-0"><a th:href="@{/user?page=0&amp;sortBy=first_name}">First Name</a> </th>
                                                    <th class="wd-15p border-bottom-0"><a th:href="@{/user?page=0&amp;sortBy=last_name}">Last Name</a> </th>
                                                    <th class="wd-20p border-bottom-0"><a th:href="@{/user?page=0&amp;sortBy=email}">Email</a> </th>
                                                    <th class="wd-10p border-bottom-0">isAdmin</th>
                                                    <th class="wd-15p border-bottom-0">Image</th>
                                                    <th class="wd-25p border-bottom-0">Action</th>
                                            </tr>
                                    </thead>

                                    <tbody>
                                             <tr th:each="user: ${users}">
                                                    <td th:text="${user.id}"></td>
                                                    <td><p th:text="${#strings.abbreviate(user.first_name,30)} "></p></td>
                                                    <td th:text="${#strings.abbreviate(user.last_name,30)}"></td>
                                                    <td th:text="${#strings.abbreviate(user.email,30)}"></td>
                                                    <td><span th:classappend="${user.isAdmin == 1} ? 'badge badge-success' : 'badge badge-danger'">[[${user.isAdmin == 1} ? 'Admin' : 'User']]</span></td>
                                                    <td>
                                                      <a href="">view</a>
                                                    </td>   
                                                    <td class="actions action-btn-tab">
                                                         <a th:href="@{/admin/user/show/{id}(id=${user.id})}" class="btn btn-warning btn-sm" data-toggle="tooltip" title="View Business Category">
                                                             <i class="fa fa-fw fa-eye"></i>
                                                         </a>
                                                         <a th:href="@{/admin/user/edit/{id}(id=${user.id})}" class="btn btn-primary btn-sm" data-toggle="tooltip" title="Edit Business Category">
                                                             <i class="fa fa-edit"></i>
                                                         </a>
                                                         <a href="javascript:void(0);" class="confirmDeleteBtn btn btn-danger btn-sm" data-toggle="tooltip" th:title="'Delete ' + ${user.first_name}"
                                                             th:data-url="@{/admin/user/destroy/{id}(id=${user.id})}">
                                                             <i class="fa fa-trash"></i>
                                                         </a>
                                                     </td> 
                                            </tr>
                                    </tbody>
                            </table>
                          </div>
                    </div>
            </div>


                       </div>
               </div>
            </div>
            <!-- End Row -->
           </div>
       </div>
       <!-- main-content closed -->
<!-- end content -->
     </div>
</body>
</html>